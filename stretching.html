<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro-Tier Gym Session Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; padding: 2rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .app-container { max-width: 1100px; margin: auto; }
        .card { border: none; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .day-card { background-color: #fff; border-left: 5px solid #212529; margin-bottom: 1.5rem; padding: 1.5rem; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);}
        .muscle-tier-1 { font-weight: 800; font-size: 1.15rem; color: #212529; }
        .muscle-tier-2 { font-weight: 600; font-size: 1.05rem; color: #495057; }
        .muscle-tier-3 { font-weight: 500; font-size: 0.95rem; color: #6c757d; }
        .set-count { font-weight: bold; font-size: 1.1rem; }
        .progression-block { background-color: #f8f9fa; border-left: 3px solid #0d6efd; padding: 0.75rem; margin-top: 0.5rem; border-radius: 0 4px 4px 0; font-family: monospace; font-size: 0.9rem;}
        .deload-row { color: #6c757d; font-style: italic; }
    </style>
</head>
<body>

<div class="container app-container">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h2 class="fw-bold">Algorithmic Coaching Protocol</h2>
            <p class="text-muted">Generate optimized macro-cycles, manage fatigue, and mitigate injury.</p>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-4 mb-4">
            <div class="card p-4 h-100">
                <h5 class="mb-4 border-bottom pb-2">Client Parameters</h5>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Primary Goal</label>
                    <select id="goal" class="form-select">
                        <option value="hypertrophy">Hypertrophy (Mass)</option>
                        <option value="strength">Pure Strength</option>
                        <option value="adaptation">Anatomical Adaptation</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Current Diet Phase</label>
                    <select id="diet" class="form-select">
                        <option value="bulk">Bulk (Caloric Surplus)</option>
                        <option value="maintenance" selected>Maintenance (Isocaloric)</option>
                        <option value="cut">Cut (Caloric Deficit)</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Mesocycle Length</label>
                    <select id="weeks" class="form-select">
                        <option value="3">3 Weeks</option>
                        <option value="4" selected>4 Weeks (Standard)</option>
                        <option value="5">5 Weeks</option>
                        <option value="6">6 Weeks</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Experience Level</label>
                    <select id="experience" class="form-select">
                        <option value="beginner">Beginner</option>
                        <option value="intermediate" selected>Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Training Frequency</label>
                    <select id="days" class="form-select">
                        <option value="3">3 Days / Week</option>
                        <option value="4" selected>4 Days / Week</option>
                        <option value="5">5 Days / Week</option>
                        <option value="6">6 Days / Week</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label class="form-label fw-bold">Priority Muscle (Optional)</label>
                    <select id="priority" class="form-select">
                        <option value="none">None (Balanced Focus)</option>
                        <option value="Chest">Chest</option>
                        <option value="Back">Back</option>
                        <option value="Quads">Quads</option>
                        <option value="Hamstrings">Hamstrings</option>
                        <option value="Shoulders">Shoulders</option>
                        <option value="Arms">Arms (Biceps & Triceps)</option>
                        <option value="Calves">Calves</option>
                    </select>
                </div>

                <button class="btn btn-dark w-100 py-2 fw-bold" onclick="generateBlueprint()">Deploy Protocol</button>
            </div>
        </div>

        <div class="col-lg-8">
            <div id="output" class="p-2">
                <div class="alert alert-secondary text-center">
                    Awaiting parameters. Click "Deploy Protocol" to build the logic.
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// THE BRAIN (Weekly Volume Data)
const brainJSON = {
    hypertrophy: { beginner: { Quads: 9, Back: 9, Chest: 9, Hamstrings: 6, Shoulders: 6, Biceps: 5, Triceps: 5, Calves: 5, Abs: 5 }, intermediate: { Quads: 14, Back: 14, Chest: 14, Hamstrings: 10, Shoulders: 10, Biceps: 9, Triceps: 9, Calves: 9, Abs: 9 }, advanced: { Quads: 19, Back: 19, Chest: 19, Hamstrings: 14, Shoulders: 14, Biceps: 12, Triceps: 12, Calves: 12, Abs: 12 } },
    strength: { beginner: { Quads: 6, Back: 6, Chest: 6, Hamstrings: 4, Shoulders: 4, Biceps: 3, Triceps: 3, Calves: 3, Abs: 3 }, intermediate: { Quads: 10, Back: 10, Chest: 10, Hamstrings: 7, Shoulders: 7, Biceps: 5, Triceps: 5, Calves: 5, Abs: 5 }, advanced: { Quads: 14, Back: 14, Chest: 14, Hamstrings: 10, Shoulders: 10, Biceps: 7, Triceps: 7, Calves: 7, Abs: 7 } },
    adaptation: { beginner: { Quads: 10, Back: 10, Chest: 10, Hamstrings: 8, Shoulders: 8, Biceps: 6, Triceps: 6, Calves: 6, Abs: 6 }, intermediate: { Quads: 15, Back: 15, Chest: 15, Hamstrings: 12, Shoulders: 12, Biceps: 10, Triceps: 10, Calves: 10, Abs: 10 }, advanced: { Quads: 20, Back: 20, Chest: 20, Hamstrings: 16, Shoulders: 16, Biceps: 14, Triceps: 14, Calves: 14, Abs: 14 } }
};

const hierarchy = { Quads: 1, Back: 1, Chest: 1, Hamstrings: 2, Shoulders: 2, Biceps: 3, Triceps: 3, Calves: 3, Abs: 3 };

const splits = {
    "3": [ { name: "Day 1: Push", muscles: ["Chest", "Shoulders", "Triceps", "Abs"] }, { name: "Day 2: Pull", muscles: ["Back", "Biceps"] }, { name: "Day 3: Legs", muscles: ["Quads", "Hamstrings", "Calves"] } ],
    "4": [ { name: "Day 1: Upper", muscles: ["Back", "Chest", "Shoulders", "Triceps", "Biceps", "Abs"] }, { name: "Day 2: Lower", muscles: ["Quads", "Hamstrings", "Calves"] }, { name: "Day 3: Upper", muscles: ["Back", "Chest", "Shoulders", "Triceps", "Biceps", "Abs"] }, { name: "Day 4: Lower", muscles: ["Quads", "Hamstrings", "Calves"] } ],
    "5": [ { name: "Day 1: Upper", muscles: ["Back", "Chest", "Shoulders", "Triceps", "Biceps"] }, { name: "Day 2: Lower", muscles: ["Quads", "Hamstrings", "Calves", "Abs"] }, { name: "Day 3: Push", muscles: ["Chest", "Shoulders", "Triceps"] }, { name: "Day 4: Pull", muscles: ["Back", "Biceps", "Abs"] }, { name: "Day 5: Legs", muscles: ["Quads", "Hamstrings", "Calves"] } ],
    "6": [ { name: "Day 1: Push", muscles: ["Chest", "Shoulders", "Triceps", "Abs"] }, { name: "Day 2: Pull", muscles: ["Back", "Biceps"] }, { name: "Day 3: Legs", muscles: ["Quads", "Hamstrings", "Calves"] }, { name: "Day 4: Push", muscles: ["Chest", "Shoulders", "Triceps", "Abs"] }, { name: "Day 5: Pull", muscles: ["Back", "Biceps"] }, { name: "Day 6: Legs", muscles: ["Quads", "Hamstrings", "Calves"] } ]
};

function getDietAssessment(goal, diet) {
    if (diet === "bulk" && goal === "hypertrophy") return `<span class="text-success fw-bold">Optimal Synergy:</span> High glycogen and surplus calories fuel progression and protect joints.`;
    if (diet === "cut" && goal === "hypertrophy") return `<span class="text-danger fw-bold">High Injury Risk:</span> Goal shifts to muscle retention. Strict form required as joints lack hydration.`;
    if (diet === "cut" && goal === "strength") return `<span class="text-warning fw-bold">Moderate Risk:</span> Heavy loads (80%+ 1RM) in a deficit heavily stress the CNS. Do not skip deloads.`;
    if (diet === "maintenance") return `<span class="text-primary fw-bold">Balanced State:</span> Steady progression. Moderate injury risk.`;
    return `<span class="text-success fw-bold">Adequate Fuel:</span> Surplus energy aids CNS recovery.`;
}

function generateBlueprint() {
    const goal = document.getElementById('goal').value;
    const diet = document.getElementById('diet').value;
    const weeks = parseInt(document.getElementById('weeks').value);
    const experience = document.getElementById('experience').value;
    const days = document.getElementById('days').value;
    const priority = document.getElementById('priority').value;
    
    let targetVolume = JSON.parse(JSON.stringify(brainJSON[goal][experience]));
    const splitMap = splits[days];
    
    let outputHTML = `
        <div class="alert alert-dark mb-4 shadow-sm border-0">
            <h6 class="fw-bold mb-2">Diet & Recovery Protocol</h6>
            <p class="mb-0 fs-6">${getDietAssessment(goal, diet)}</p>
        </div>`;

    if (priority !== "none") {
        if (priority === "Arms") {
            targetVolume["Biceps"] = Math.ceil(targetVolume["Biceps"] * 1.3);
            targetVolume["Triceps"] = Math.ceil(targetVolume["Triceps"] * 1.3);
        } else {
            targetVolume[priority] = Math.ceil(targetVolume[priority] * 1.3);
        }
    }

    let muscleFrequency = {};
    splitMap.forEach(day => {
        day.muscles.forEach(muscle => {
            muscleFrequency[muscle] = (muscleFrequency[muscle] || 0) + 1;
        });
    });

    splitMap.forEach(day => {
        outputHTML += `
        <div class="day-card">
            <h4 class="mb-3">${day.name}</h4>
            <div class="container px-0">`;
        
        let sortedMuscles = day.muscles.sort((a, b) => hierarchy[a] - hierarchy[b]);

        sortedMuscles.forEach(muscle => {
            let sessionSets = Math.round(targetVolume[muscle] / muscleFrequency[muscle]);
            if (sessionSets < 2) sessionSets = 2;

            // Divide into Warmup and Working sets
            let warmupSets = Math.max(1, Math.floor(sessionSets * 0.3)); 
            let workSets = sessionSets - warmupSets;

            let tierClass = `muscle-tier-${hierarchy[muscle]}`;
            let setType = hierarchy[muscle] <= 2 ? "Compound Focus" : "Isolation Focus";

            outputHTML += `
                <div class="row mb-4 align-items-start border-bottom pb-3">
                    <div class="col-12">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div>
                                <span class="${tierClass}">${muscle}</span>, 
                                <span class="text-muted">${setType}</span>, 
                                <span class="set-count text-primary">${sessionSets} Sets</span>
                            </div>
                        </div>
                        
                        <div class="progression-block">`;

            // Loop through each week to generate the exact sets/reps/% requested
            for (let w = 1; w <= weeks; w++) {
                let isDeload = (w === weeks);
                let reps, workPct;

                // Scaling logic based on Goal
                if (goal === "hypertrophy") {
                    reps = isDeload ? 10 : 10 + (w - 1); // 10, 11, 12...
                    workPct = isDeload ? 50 : 65 + ((w - 1) * 3); // 65%, 68%, 71%...
                } else if (goal === "strength") {
                    reps = isDeload ? 5 : Math.max(1, 6 - w); // 5, 4, 3...
                    workPct = isDeload ? 60 : 75 + ((w - 1) * 5); // 75%, 80%, 85%...
                } else {
                    reps = 15;
                    workPct = isDeload ? 40 : 50 + ((w - 1) * 5);
                }

                if (isDeload) {
                    outputHTML += `<div class="deload-row mb-1">Week ${w} (Deload): ${sessionSets} Sets x ${reps} Reps @ ${workPct}% 1RM</div>`;
                } else {
                    outputHTML += `
                        <div class="mb-2">
                            <div>Week ${w}: Warmup : ${warmupSets} Sets x ${reps} Reps @ 50% 1RM</div>
                            <div class="fw-bold">Week ${w}: Working: ${workSets} Sets x ${reps} Reps @ ${workPct}% 1RM</div>
                        </div>`;
                }
            }

            outputHTML += `     </div>
                    </div>
                </div>`;
        });

        outputHTML += `</div></div>`;
    });

    if (diet === "cut") {
        outputHTML += `<div class="alert alert-warning mt-3 fs-6"><i class="fw-bold">Mentor Note:</i> On a cut, drop 1-2 sets per muscle group if joint pain occurs.</div>`;
    }

    document.getElementById('output').innerHTML = outputHTML;
}
</script>

</body>
</html>
